<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AdminHub Login</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    body {
      background: #1A2226;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: #ECF0F5;
    }
    .login-box {
      background: #222D32;
      padding: 30px;
      border-radius: 10px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
    }
    .login-title {
      font-size: 24px;
      margin-bottom: 20px;
      text-align: center;
    }
    .guest-login {
      margin-top: 20px;
      text-align: center;
    }
    .guest-login a {
      color: #3C91E6;
      text-decoration: none;
    }
    .guest-login a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="login-box">
    <div class="login-title">AdminHub Login</div>
    <form onsubmit="login(event)">
      <div class="form-group">
        <label>Username</label>
        <input type="text" id="username" class="form-control">
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" id="password" class="form-control">
      </div>
      <div id="loginMsg" class="text-danger mb-2"></div>
      <button type="submit" class="btn btn-primary btn-block">Login</button>
    </form>
    <div class="guest-login">
      <a href="#" onclick="loginAsGuest(event)">Continue as Guest</a>
    </div>
  </div>

  <script>
    const users = [
      { 
        id: "170712@ab", 
        password: "OWNER@00014243774", 
        name: "Aditya Bhardwaj",
        role: "OWNER",
        permissions: ["all"]
      },
      { 
        id: "310712@cb", 
        password: "CO-OWNER@bhardwaj3107cb", 
        name: "Chandan Bhardwaj",
        role: "CO-OWNER",
        permissions: ["view", "edit", "attendance"]
      },
      { 
        id: "310712@db", 
        password: "CO-OWNER@bhardwaj3107db", 
        name: "Deepak Bhardwaj",
        role: "CO-OWNER",
        permissions: ["view", "edit", "attendance"]
      },
      {
        id: "hr@kawachi",
        password: "HR@kawachi2024",
        name: "HR Manager",
        role: "HR",
        permissions: ["view", "edit", "attendance", "salary"]
      },
      {
        id: "finance@kawachi",
        password: "FIN@kawachi2024",
        name: "Finance Manager",
        role: "FINANCE",
        permissions: ["view", "salary", "bank"]
      },
      {
        id: "attendance@kawachi",
        password: "ATT@kawachi2024",
        name: "Attendance Manager",
        role: "ATTENDANCE",
        permissions: ["view", "attendance"]
      }
    ];

    function login(e) {
      e.preventDefault();
      const id = document.getElementById("username").value.trim();
      const pw = document.getElementById("password").value.trim();
      const user = users.find(u => u.id === id && u.password === pw);

      if (user) {
        sessionStorage.setItem("isLoggedIn", "true");
        sessionStorage.setItem("loggedInUser", JSON.stringify(user));
        const targetPage = sessionStorage.getItem("redirectAfterLogin") || "index.html";
        sessionStorage.removeItem("redirectAfterLogin");
        window.location.href = targetPage;
      } else {
        document.getElementById("loginMsg").textContent = "Invalid credentials.";
      }
    }

    function loginAsGuest(e) {
      e.preventDefault();
      const guestUser = {
        id: "guest",
        name: "Guest User",
        role: "GUEST",
        permissions: ["view"]
      };
      sessionStorage.setItem("isLoggedIn", "true");
      sessionStorage.setItem("loggedInUser", JSON.stringify(guestUser));
      window.location.href = "index.html";
    }
  </script>
</body>
</html>